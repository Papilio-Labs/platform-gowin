;
; ESP32 + Gowin FPGA Dual-Target Blinky Example
;
; This example demonstrates how to use the Gowin platform for dual-target
; development with ESP32-S3 + Gowin FPGA.
;
; Features:
; - ESP32-S3 runs Arduino framework
; - FPGA bitstream is automatically built after ESP32 firmware
; - ESP32 can communicate with FPGA via SPI
; - Both targets share the same project
;

[platformio]
default_envs = esp32_fpga

[env:esp32_fpga]
platform = gowin
board = papilio_retrocade_esp32
framework = arduino

; Serial monitor
monitor_speed = 115200
monitor_filters = esp32_exception_decoder

; Upload settings
upload_protocol = esptool
upload_speed = 921600

; FPGA configuration
board_build.fpga_project = fpga/project.gprj
board_build.fpga_top_module = top

; Optional: Specify Gowin toolchain path if not in standard location
; board_build.gowin_path = C:/Gowin_V1.9.9

; Build flags for ESP32
build_flags =
    -DBOARD_HAS_FPGA
    -DFPGA_SPI_CS=10
    -DFPGA_SPI_MOSI=11
    -DFPGA_SPI_MISO=13
    -DFPGA_SPI_SCK=12
    -DFPGA_RESET_PIN=14
    -DFPGA_CDONE_PIN=21
